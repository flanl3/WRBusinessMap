<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title></title>  
    
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
      integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
      crossorigin=""/>
    <script type="text/javascript"></script>
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
      integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
      crossorigin=""></script>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="https://mutsuyuki.github.io/Leaflet.SmoothWheelZoom/SmoothWheelZoom.js"></script>
    <script src="https://ismyrnow.github.io/leaflet-groupedlayercontrol/src/leaflet.groupedlayercontrol.js"></script>
    <link rel="stylesheet" href="https://ismyrnow.github.io/leaflet-groupedlayercontrol/src/leaflet.groupedlayercontrol.css">
    
    <script>
      function isMobileTablet()
      {
        var check = false;
        (function(a){
        if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))) 
          check = true;
        })(navigator.userAgent||navigator.vendor||window.opera);
      return check;
      }
    
      if(isMobileTablet())
      {
        h = 95vh;
        w = 95vw;
      }
      else
      {
        h = 1000 px;
        w = 800 px;
      }
    </script>
    
    
    <style>
      #mapid {
        height: h;
        width: w;
      }
    </style>
</head>
<body>

<div id="mapid"></div>

<script>

  
  var mymap = L.map('mapid',
  {
    scrollWheelZoom: false,
    smoothWheelZoom: true,
    smoothSensitivity: 2,
  })
  .setView([39.775, -105.085], 14);

  mymap.scrollWheelZoom = true;

  
  L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', 
  {
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
    maxZoom: 22,
    minZoom: 10,
    id: 'kateerickson12/ckcz8mszl0cam1klbnixvlv29',
    tileSize: 512,
    zoomOffset: -1,
    accessToken: 'pk.eyJ1Ijoia2F0ZWVyaWNrc29uMTIiLCJhIjoiY2tiNnl6cGUyMDBvOTJya2NidnZyOXE3NyJ9.9i41hYKRsTmCb_IoNRA6ng'
  })
  .addTo(mymap);

  
  var pinpoints = [];

  
  var auto = [];
  var chu = [];
  var cof = [];
  var ent = [];
  var groc = [];
  var hosp = [];
  var liq = [];
  var rest = [];
  var resb = [];
  var ret = [];
  var anim = [];
  var fit = [];
  var heal = [];
  var laun = [];
  var med = [];
  var medl = [];
  var pre = [];
  var prof = [];
  var sal = [];
  var sale = [];
  var lea = [];
  var sub = [];

  
  var a = [anim, auto, chu, cof, ent, fit, groc, heal, hosp, laun, liq, med, medl, pre, prof, rest, resb, ret, sal, sale, lea, sub];
  var c = ["Animal", "Auto", "Church", "Coffee", "Entertainment", "Fitness", "Grocery", "Health", "Hospital", "Laundromat", "Liquor", "Media", "Medical", "Preschool", "Professional", "Restaurant", "Restaurant/Brewpub", "Retail", "Salon", "Sale", "Lease", "Sublease"];

  d3.csv("https://raw.githubusercontent.com/flanl3/WRBusinessMap/master/locations.csv")
  .then(function(d)
  {
    for(var i = 0; i < d.length; i++)
    {
      pinpoints[i] = L.marker([d[i].latitude,d[i].longitude]);
      pinpoints[i].bindPopup("<b>"+d[i].name+"</b><br>"+d[i].address);
      for(var j = 0; j < c.length; j++)
      {
        if (d[i].type == c[j])
        {
          a[j].push(pinpoints[i]);
        }
      }
    }
  })
  .then(function()
  {
    
    var food = {
      "Coffee Shops": L.layerGroup(cof),
      "Grocery Stores": L.layerGroup(groc),
      "Liquor Stores": L.layerGroup(liq),
      "Restaurants": L.layerGroup(rest),
      "Brewpubs": L.layerGroup(resb)
    };

    var services = {
      "Animal": L.layerGroup(anim),
      "Fitness": L.layerGroup(fit),
      "Health": L.layerGroup(heal),
      "Laundromat": L.layerGroup(laun),
      "Media": L.layerGroup(med),
      "Medical": L.layerGroup(medl),
      "Preschool": L.layerGroup(pre),
      "Professional": L.layerGroup(prof),
      "Salon": L.layerGroup(sal)
    };

    var basic = {
      "Automotive": L.layerGroup(auto),
      "Churches": L.layerGroup(chu),
      "Entertainment": L.layerGroup(ent),
      "Hospital": L.layerGroup(hosp),
      "Retail": L.layerGroup(ret)
    };

    var avail = {
      "For Sale": L.layerGroup(sale),
      "For Lease": L.layerGroup(lea),
      "For Sublease": L.layerGroup(sub)
    };

    
    var layers =
    {
      "Services": services,
      "Food": food,
      "Other": basic,
      "Available": avail
    };

    
    var lControl = L.control.groupedLayers(null, layers, {groupCheckboxes: true, collapsed: false});

    
    mymap.addControl(lControl);
  });

</script>

</body>
</html>
